# Order Upload Flow - Visual Guide

## ğŸ¯ The Complete Flow (Fixed!)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          START HERE: User Types Command             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   /order_upload      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Bot Response:                                       â”‚
â”‚  ğŸ“¦ Order Upload Mode Activated!                    â”‚
â”‚                                                      â”‚
â”‚  Instructions:                                       â”‚
â”‚  1. Send me photos of handwritten order notes       â”‚
â”‚  2. You can send multiple pages if needed           â”‚
â”‚  3. Type /order_submit when done                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  User Sends Photo    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Bot Response:                                       â”‚
â”‚  âœ… Page 1 received!                                â”‚
â”‚                                                      â”‚
â”‚  Send more pages or type /order_submit to process.  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  More pages to send?          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚               â”‚
            Yes  â”‚               â”‚  No
                 â”‚               â”‚
                 â–¼               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚Send More â”‚    â”‚ /order_submitâ”‚
         â”‚  Photos  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                 â”‚               â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Bot Response:                                       â”‚
â”‚  âœ… Order submitted!                                â”‚
â”‚                                                      â”‚
â”‚  ğŸ“„ Order ID: ORD_20260207_143022                   â”‚
â”‚  ğŸ“„ Pages: 1                                        â”‚
â”‚                                                      â”‚
â”‚  Processing your order... This may take a moment.   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Bot Processing...   â”‚
              â”‚  (30-60 seconds)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Bot Sends Results:                                  â”‚
â”‚                                                      â”‚
â”‚  ğŸ“„ Clean PDF Invoice                               â”‚
â”‚  ğŸ“Š Item Summary                                    â”‚
â”‚  ğŸ’° Pricing Information                             â”‚
â”‚  âœ… Match Confidence Scores                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  DONE!  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âŒ What NOT to Do (Common Mistakes)

### Mistake #1: No Command First
```
âŒ WRONG FLOW:

[Send Photo Directly]
      â”‚
      â–¼
âŒ No session created!
      â”‚
      â–¼
/order_submit
      â”‚
      â–¼
âŒ ERROR: No active order session
```

**Fix:** Always type `/order_upload` FIRST!

---

### Mistake #2: Wrong Submit Command
```
âŒ WRONG FLOW:

/order_upload
      â”‚
      â–¼
[Send Photos]
      â”‚
      â–¼
/done  â† WRONG COMMAND!
      â”‚
      â–¼
âŒ ERROR: Command for invoices, not orders
```

**Fix:** Use `/order_submit` for orders (not `/done`)

---

### Mistake #3: Using Invoice Commands
```
âŒ WRONG FLOW:

/upload  â† Invoice command!
      â”‚
      â–¼
[Send Photos]
      â”‚
      â–¼
/order_submit  â† Order command!
      â”‚
      â–¼
âŒ ERROR: Mixing two different flows
```

**Fix:** Pick ONE flow:
- Orders: `/order_upload` â†’ `/order_submit`
- Invoices: `/upload` â†’ `/done`

---

## ğŸ”„ Comparison: Orders vs Invoices

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ğŸ“¦ ORDER UPLOAD          â”‚       ğŸ“„ INVOICE UPLOAD         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚                                 â”‚
â”‚   /order_upload                 â”‚   /upload                       â”‚
â”‚         â”‚                       â”‚         â”‚                       â”‚
â”‚         â–¼                       â”‚         â–¼                       â”‚
â”‚   [Send Photos]                 â”‚   [Send Photos]                 â”‚
â”‚         â”‚                       â”‚         â”‚                       â”‚
â”‚         â–¼                       â”‚         â–¼                       â”‚
â”‚   /order_submit                 â”‚   /done                         â”‚
â”‚         â”‚                       â”‚         â”‚                       â”‚
â”‚         â–¼                       â”‚         â–¼                       â”‚
â”‚   PDF Generated                 â”‚   Data to Sheets                â”‚
â”‚                                 â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Difference:**
- **Orders:** Handwritten notes â†’ Clean PDF invoice
- **Invoices:** Printed invoices â†’ Google Sheets data

---

## ğŸ†˜ Error Handling Flow

```
User sends /order_submit without session
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ No Active Order Session                 â”‚
â”‚                                             â”‚
â”‚  You need to start an order upload session  â”‚
â”‚  first!                                     â”‚
â”‚                                             â”‚
â”‚  How to upload an order:                    â”‚
â”‚  1. Type /order_upload                      â”‚
â”‚  2. Send your order photos                  â”‚
â”‚  3. Type /order_submit                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
User reads error message
      â”‚
      â–¼
User types /order_upload
      â”‚
      â–¼
âœ… Session created - Flow continues normally
```

---

## ğŸ“ Decision Tree: Which Command to Use?

```
                    START
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  What are you uploading?    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                         â”‚
         â–¼                         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Handwrittenâ”‚          â”‚ Printed Invoice â”‚
  â”‚   Order    â”‚          â”‚ (has GST info)  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚
         â–¼                         â–¼
  /order_upload             /upload
         â”‚                         â”‚
         â–¼                         â–¼
  [Send Photos]            [Send Photos]
         â”‚                         â”‚
         â–¼                         â–¼
  /order_submit             /done
         â”‚                         â”‚
         â–¼                         â–¼
    PDF File              Google Sheets
```

---

## ğŸ“± Bot Menu Structure

```
Main Menu
â”œâ”€â”€ ğŸ“¤ Upload Invoice
â”‚   â”œâ”€â”€ Single Invoice â†’ /upload â†’ /done
â”‚   â”œâ”€â”€ Batch Upload
â”‚   â””â”€â”€ Upload Document
â”‚
â”œâ”€â”€ ğŸ“¦ Upload Order [NEW!]
â”‚   â””â”€â”€ /order_upload â†’ [photos] â†’ /order_submit
â”‚
â”œâ”€â”€ ğŸ“Š Generate GST Input
â”‚   â”œâ”€â”€ GSTR-1 Export
â”‚   â”œâ”€â”€ GSTR-3B Summary
â”‚   â””â”€â”€ Reports
â”‚
â”œâ”€â”€ â“ Help
â”‚   â””â”€â”€ /help
â”‚
â””â”€â”€ ğŸ“ˆ Usage & Stats
```

---

## â±ï¸ Timing Expectations

```
/order_upload
    â”‚
    â”œâ”€ Instant: Session created
    â”‚
    â–¼
[Send Photo]
    â”‚
    â”œâ”€ 2-5 sec: Photo uploaded
    â”‚
    â–¼
/order_submit
    â”‚
    â”œâ”€ Instant: Validation
    â”‚
    â–¼
Processing
    â”‚
    â”œâ”€ 30-60 sec: OCR + Extraction
    â”œâ”€ 10-15 sec: Normalization
    â”œâ”€ 5-10 sec: Pricing Match
    â”œâ”€ 5-10 sec: PDF Generation
    â”‚
    â–¼
Results Sent
    â”‚
    â””â”€ Total: 60-120 seconds
```

---

## ğŸ¯ Success Checklist

Before `/order_submit`:
- [ ] Typed `/order_upload` first
- [ ] Got "Order Upload Mode Activated" message
- [ ] Sent at least one photo
- [ ] Got "Page X received" confirmation

Ready to submit:
- [ ] All pages sent
- [ ] Photos are clear
- [ ] Ready to wait 1-2 minutes for processing

After submission:
- [ ] Got "Order submitted!" confirmation
- [ ] Received Order ID
- [ ] Waiting for results
- [ ] PDF file delivered

---

**Remember: The magic happens in the right sequence!**

ğŸ”¹ Start: `/order_upload`  
ğŸ”¹ Middle: Send photos  
ğŸ”¹ End: `/order_submit`  
ğŸ”¹ Result: Beautiful PDF! âœ¨
